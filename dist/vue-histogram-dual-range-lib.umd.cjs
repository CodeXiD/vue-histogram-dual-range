(function(e,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(e=typeof globalThis<"u"?globalThis:e||self,e.VueHistogramDualRangeLibrary=r(e.Vue))})(this,function(e){"use strict";function r(t,o){return e.unref(t)}function z(t){return typeof t=="function"?t():e.unref(t)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const E=t=>typeof t<"u";function R(t,o){function m(...l){return new Promise((i,n)=>{Promise.resolve(t(()=>o.apply(this,l),{fn:o,thisArg:this,args:l})).then(i).catch(n)})}return m}const q=t=>t();function k(...t){if(t.length===2){const[o,m]=t;o.value=m}if(t.length===3){const[o,m,l]=t;o[m]=l}}function v(t,o={}){const{method:m="parseFloat",radix:l,nanToZero:i}=o;return e.computed(()=>{let n=z(t);return typeof n=="string"&&(n=Number[m](n,l)),i&&Number.isNaN(n)&&(n=0),n})}function w(t,o,m={}){const{eventFilter:l=q,...i}=m,n=R(l,o);let p,s,c;if(i.flush==="sync"){const u=e.ref(!1);s=()=>{},p=g=>{u.value=!0,g(),u.value=!1},c=e.watch(t,(...g)=>{u.value||n(...g)},i)}else{const u=[],g=e.ref(0),C=e.ref(0);s=()=>{g.value=C.value},u.push(e.watch(t,()=>{C.value++},{...i,flush:"sync"})),p=d=>{const f=C.value;d(),g.value+=C.value-f},u.push(e.watch(t,(...d)=>{const f=g.value>0&&g.value===C.value;g.value=0,C.value=0,!f&&n(...d)},i)),c=()=>{u.forEach(d=>d())}}return{stop:c,ignoreUpdates:p,ignorePrevAsyncUpdates:s}}function A(t){return JSON.parse(JSON.stringify(t))}function $(t,o,m,l={}){var i,n,p;const{clone:s=!1,passive:c=!1,eventName:u,deep:g=!1,defaultValue:C,shouldEmit:d}=l,f=e.getCurrentInstance(),b=m||(f==null?void 0:f.emit)||((i=f==null?void 0:f.$emit)==null?void 0:i.bind(f))||((p=(n=f==null?void 0:f.proxy)==null?void 0:n.$emit)==null?void 0:p.bind(f==null?void 0:f.proxy));let V=u;V=V||`update:${o.toString()}`;const x=a=>s?typeof s=="function"?s(a):A(a):a,N=()=>E(t[o])?x(t[o]):C,H=a=>{d?d(a)&&b(V,a):b(V,a)};if(c){const a=N(),y=e.ref(a);let h=!1;return e.watch(()=>t[o],S=>{h||(h=!0,y.value=x(S),e.nextTick(()=>h=!1))}),e.watch(y,S=>{!h&&(S!==t[o]||g)&&H(S)},{deep:g}),y}else return e.computed({get(){return N()},set(a){H(a)}})}const D=t=>(e.pushScopeId("data-v-f556e555"),t=t(),e.popScopeId(),t),F={class:"sliders-control"},I=D(()=>e.createElementVNode("div",{class:"slider-track"},null,-1)),P=["value","min","max"],M=["value","min","max"],O=e.defineComponent({__name:"DoubleRangeSlider",props:{modelValue:{type:Array,default:()=>[0,100]},min:{type:Number,default:0},max:{type:Number,default:100},sliderColor:{type:String,required:!0},sliderBorderColor:{type:String,required:!0},sliderHoverColor:{type:String,required:!0},sliderSize:{type:Number,required:!0},rangeColor:{type:String,required:!0},rangeActiveColor:{type:String,required:!0}},emits:["update:modelValue"],setup(t,{emit:o}){const m=o,l=t,{sliderColor:i,rangeColor:n,rangeActiveColor:p,min:s,max:c}=e.toRefs(l),u=$(l,"modelValue",m),g=([a,y])=>{let h=a,S=y;return h>=S&&(h=S-1),S<=h&&(S=h+1),(h<r(s)||h>r(c))&&(h=r(s)),(S>r(c)||S<r(s))&&(S=r(c)),[h,S]},{ignoreUpdates:C,stop:d}=w(u,(a,y)=>{a[0]===y[0]&&a[1]===y[1]||k(u,g(a))});e.onUnmounted(()=>{d()});const f=e.ref(),b=e.ref(),V=e.ref(),x=a=>{let y=parseInt(a.target.value,10);const h=r(u)[1];C(()=>{k(u,g([y,h]))})},N=a=>{const y=r(u)[0];let h=parseInt(a.target.value,10);C(()=>{k(u,g([y,h]))})},H=e.computed(()=>{const a=r(u)[0]/r(c)*100,y=r(u)[1]/r(c)*100;return`linear-gradient(to right, ${r(n)} ${a}%, ${r(p)} ${a}%, ${r(p)} ${y}%, ${r(n)} ${y}%)`});return(a,y)=>(e.openBlock(),e.createElementBlock("div",{class:"double-range-slider",style:e.normalizeStyle({"--sliderColor":e.unref(i),"--sliderBorderColor":t.sliderBorderColor,"--sliderHoverColor":t.sliderHoverColor,"--sliderSize":t.sliderSize,"--rangeColor":e.unref(n),"--rangeActiveColor":e.unref(p),"--rangeFillBg":H.value})},[e.createElementVNode("div",F,[I,e.createElementVNode("input",{ref_key:"fromSliderRef",ref:f,class:"fromSlider",type:"range",value:e.unref(u)[0],min:e.unref(s),max:e.unref(c),onInput:x},null,40,P),e.createElementVNode("input",{ref_key:"toSliderRef",ref:b,class:"toSlider",type:"range",value:e.unref(u)[1],min:e.unref(s),max:e.unref(c),style:e.normalizeStyle({background:V.value}),onInput:N},null,44,M)])],4))}}),B=(t,o)=>{const m=t.__vccOpts||t;for(const[l,i]of o)m[l]=i;return m},T=B(O,[["__scopeId","data-v-f556e555"]]);function W({histogramDataMap:t,step:o,min:m,max:l}){const i=[];for(let n=m;n<=l;n+=o){let p=0,s=0;for(let c=n;c<n+o&&c<=l;c++)t.has(c)&&(p+=t.get(c),s++);s>0?i.push(Number((p/s).toFixed(2))):i.push(0)}return i}const _=["x","width","height","fill"],U=B(e.defineComponent({__name:"Histogram",props:{histogramData:{type:Array,default:()=>[0,100]},histogramHeight:{type:Number,default:83},histogramColumnCount:{type:Number,required:!0},min:{type:Number,required:!0},max:{type:Number,required:!0},histogramColumnColor:{type:String,required:!0},histogramColumnOffset:{type:Number,required:!0},sliderSize:{type:Number,required:!0}},setup(t){const o=t,{histogramData:m,min:l,max:i,histogramColumnCount:n,histogramColumnOffset:p}=e.toRefs(o),s=e.ref(),c=e.computed(()=>{var d;if(r(s))return(d=r(s))==null?void 0:d.clientWidth}),u=e.computed(()=>{const d=r(c);return d?r(v((d/r(n)-r(p)).toFixed(2))):0}),g=e.computed(()=>{let d=new Map;return r(m).forEach(f=>{d.set(f.value,f.count)}),d}),C=e.computed(()=>{const d=Math.ceil(r(i)/r(n)),f=W({histogramDataMap:r(g),step:d,min:r(l),max:r(i)}),b=Math.max.apply(Math,f);return f.map(x=>x/b*100).map((x,N)=>{let H=0;return N>0&&(H=r(u)*N+N*r(p)),{heightPercentage:x,x:H}})});return(d,f)=>(e.openBlock(),e.createElementBlock("div",{class:"histogram",style:e.normalizeStyle({"--sliderSize":t.sliderSize})},[(e.openBlock(),e.createElementBlock("svg",{ref_key:"svgHistogramRef",ref:s,style:e.normalizeStyle({height:`${t.histogramHeight}px`}),xmlns:"http://www.w3.org/2000/svg"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(b,V)=>(e.openBlock(),e.createElementBlock("rect",{key:V,x:b.x,y:"0",width:u.value,height:`${b.heightPercentage}%`,fill:t.histogramColumnColor},null,8,_))),128))],4))],4))}}),[["__scopeId","data-v-a4392c68"]]),J={class:"histogram-range-container"};return B(e.defineComponent({__name:"VueHistogramDualRange",props:{modelValue:{type:Array,default:()=>[0,100]},min:{type:Number,default:0},max:{type:Number,default:100},histogramData:{type:Array,default:()=>[]},histogramColumnCount:{type:Number,default:17},histogramHeight:{type:Number,default:83},histogramColumnColor:{type:String,default:"#a3bbff"},histogramColumnOffset:{type:Number,default:5},sliderColor:{type:String,default:"#3264fe"},sliderBorderColor:{type:String,default:"#577cec"},sliderHoverColor:{type:String,default:"#577cec"},sliderSize:{type:Number,default:20},rangeColor:{type:String,default:"#dadae5"},rangeActiveColor:{type:String,default:"#3264fe"}},emits:["update:modelValue"],setup(t,{emit:o}){const m=o,l=t,i=$(l,"modelValue",m),n=e.computed(()=>l.histogramColumnCount<=l.max?l.histogramColumnCount:l.max);return(p,s)=>(e.openBlock(),e.createElementBlock("div",J,[e.createVNode(U,{"histogram-data":t.histogramData,"histogram-height":t.histogramHeight,"histogram-column-count":n.value,max:t.max,min:t.min,"histogram-column-color":t.histogramColumnColor,"histogram-column-offset":t.histogramColumnOffset,"slider-size":t.sliderSize},null,8,["histogram-data","histogram-height","histogram-column-count","max","min","histogram-column-color","histogram-column-offset","slider-size"]),e.createVNode(T,{modelValue:e.unref(i),"onUpdate:modelValue":s[0]||(s[0]=c=>e.isRef(i)?i.value=c:null),min:t.min,max:t.max,"slider-color":t.sliderColor,"slider-border-color":t.sliderBorderColor,"slider-hover-color":t.sliderHoverColor,"slider-size":t.sliderSize,"range-color":t.rangeColor,"range-active-color":t.rangeActiveColor},null,8,["modelValue","min","max","slider-color","slider-border-color","slider-hover-color","slider-size","range-color","range-active-color"])]))}}),[["__scopeId","data-v-ed8a03ee"]])});
